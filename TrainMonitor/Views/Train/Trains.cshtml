@model List<TrainViewModel>

@{
    Layout = "_Layout";
}

<h1 class="mb-4">@ViewBag.Title</h1>


<div id="train-table" class="border-bottom">
    <!-- Header -->
    <div class="top-header row bg-dark font-weight-bold py-2 text-white">
        <div class="col-2">Train Number</div>
        <div class="col-2">Train Name</div>
        <div class="col-2">Next Station</div>
        <div class="col-1">Delay Time</div>
        <div class="col-2">Last Update</div>
        <div class="col-1">Incident</div>
        <div class="col-2">Incidents</div>
    </div>

    <!-- Rows -->
    @foreach (var train in Model)
    {
        @if (@train.HasDelay)
        {
            <div class="row py-2 text-decoration-none text-white bg-danger border-top">
                <partial name="Partials/_TrainRow" model="train" />

                <div class="col-1">
                    <button type="button" class="btn btn-sm btn-dark add-incident" data-bs-toggle="modal" data-bs-target="#add-incident-@train.TrainId">Add</button>
                </div>

                <div class="col-2">
                    <a href="@Url.Action("GetIncidentHistory", "Train", new { trainID = train.TrainId })"
                       class="btn btn-sm btn-danger" title="View Incident History">
                        <i class="fas fa-bell"></i>
                        View History
                    </a>
                </div>

                <partial name="Partials/_IncidentModal" model="new AddIncidentViewModel { TrainId = train.TrainId }" />
            </div>
        }
        else
        {
            <div class="row py-2 text-decoration-none text-dark bg-grey-light border-end border-start border-top">
                <partial name="Partials/_TrainRow" model="train" />
                <div class="col-1"></div>
                <div class="col-2"></div>
            </div>

        }
    }
</div>
